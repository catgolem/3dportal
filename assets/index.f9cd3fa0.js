import{C as k,S as C,F as D,P as G,W as R,H as T,a as V,D as q,T as I,B as w,M as K,O as H,b as _,c as $,d as L,e as P,f as j,g as J,h as U,V as u,L as X,i as z,R as Q}from"./vendor.f8c6c53c.js";const Y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const v of r.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}};Y();let h=!1,y=!1,x=!1,g=!1;const l=new u,M=new u,b=new k,a=new C;a.background=new k(16777215);a.fog=new D(16777215,0,750);const o=new G(75,window.innerWidth/window.innerHeight,.1,1e3);o.matrixWorld.decompose(o.position,o.quaternion,o.scale);o.position.set(0,1.1,2);const d=new R;d.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(d.domElement);const W=new T(15658751,7829384,.8);W.position.set(.5,1,.75);a.add(W);const m=new V(o,d.domElement);window.addEventListener("click",()=>{m.lock()});const c=new X;c.addHandler(/\.dds$/i,new q);c.addHandler(/\.tga$/i,new I);let A=new w,B=new w;new K(c).load("./models/Street environment_V01.mtl",function(n){n.preload(),new H(c).setMaterials(n).load("./models/Street environment_V01.obj",function(e){A=new w().setFromObject(e),B=new w().setFromObject(o),a.add(e),e.position.y=.1})});const Z=new _(400,400,100,100),ee=new $({color:"orange",wireframe:!0}),F=new L(Z,ee);F.rotateX(-Math.PI/2);a.add(F);const S=new P(20,20,20);let oe=S.attributes.position;const E=[];for(let n=0,e=oe.count;n<e;n++)b.setHSL(Math.random()*.3+.5,.75,Math.random()*.25+.75),E.push(b.r,b.g,b.b);S.setAttribute("color",new j(E,3));for(let n=0;n<200;n++){const e=new J({specular:16777215,flatShading:!0,vertexColors:!0});e.color.setHSL(Math.random()*.2+.5,.75,Math.random()*.25+.75);const t=new L(S,e);t.position.x=Math.floor(Math.random()*20-10)*20,t.position.y=Math.floor(Math.random()*20)*20+10,t.position.z=Math.floor(Math.random()*20-10)*20,a.add(t)}var f=new z(0,0,1,0);f.applyMatrix4(o.matrix).normalize();f.multiplyScalar(3);console.log(f);const ne=new P(.5,.1,.5),te=new U({color:255,opacity:.5,transparent:!0,depthTest:!1}),p=new L(ne,te);p.position.x=o.position.x+f.x*-1;p.position.y=-.5;p.position.z=o.position.z+f.z*-1;a.add(p);const ie=n=>{switch(n.code){case"KeyW":h=!0;break;case"KeyS":y=!0;break;case"KeyA":x=!0;break;case"KeyD":g=!0;break}},re=n=>{switch(n.code){case"KeyW":h=!1;break;case"KeyS":y=!1;break;case"KeyA":x=!1;break;case"KeyD":g=!1;break}};document.addEventListener("keydown",ie);document.addEventListener("keyup",re);let O=performance.now();function N(){requestAnimationFrame(N);const n=performance.now();if(M.z=Number(h)-Number(y),M.x=Number(g)-Number(x),A.intersectsBox(B),m.isLocked){new Q(new u,new u(0,0,-1),0,10);const t=(n-O)/1e3;l.z-=l.z*5*t,l.x-=l.x*5*t,(h||y)&&(l.z-=M.z*50*t),(g||x)&&(l.x-=M.x*50*t),m.moveForward(-l.z*t),m.moveRight(-l.x*t);var e=new z(0,0,1,0);e.applyMatrix4(o.matrix).normalize(),e.multiplyScalar(3),p.position.set(o.position.x+e.x*-1,0,o.position.z+e.z*-1)}O=n,d.render(a,o)}N();document.addEventListener("mousedown",ae,!1);function ae(n){if(m.isLocked){console.log(o.position.x),console.log(o.position.y),console.log(o.position.z);var e=new z(0,0,1,0);e.applyMatrix4(o.matrix).normalize(),e.multiplyScalar(3),console.log(e),new K(c).load("./models/Sign11.mtl",function(t){t.preload(),new H(c).setMaterials(t).load("./models/Sign11.obj",function(s){s.scale.set(.5,.5,.5),a.add(s),s.position.x=o.position.x+e.x*-1,s.position.y=0,s.position.z=o.position.z+e.z*-1})})}}window.addEventListener("resize",se);function se(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)}
